<div ng-controller="mvSidebarCtrl">
    <div class="sidebar" ng-show="identity.isAuthenticated()" ng-class="{'enlarged': enlarged}">
        <form class="navbar-form" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="搜索">
                <button class="btn search-button" type="submit">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </form>
        <ul id="nav">
            <li>
                <a href="/dashboard" class="open">
                    <i class="fa fa-tachometer"></i>
                    <span>仪表盘</span>
                </a>
            </li>
            <li>
                <a href="/calendar" class="open">
                    <i class="fa fa-calendar"></i>
                    <span>日历</span>
                </a>
            </li>
            <li>
                <a href="/dashboard" class="open">
                    <i class="fa fa-calendar"></i>
                    <span>职位</span>
                </a>
            </li>

            <li class="has_sub">
                <a href="#">
                    <i class="fa fa-glass"></i>
                    <span>应聘</span>
                    <span class="pull-right">
                        <i class="fa " ng-class="{'fa-chevron-left': enlarged, 'fa-chevron-down' : !enlarged}"></i>
                    </span>
                </a>
                <ul>
                    <li><a href="">今日(10)</a></li>
                    <li><a href="">未读(20)</a></li>
                    <li><a href="">待定(5)</a></li>
                </ul>
            </li>

            <li class="has_sub">
                <a href="#">
                    <i class="fa fa-glass"></i>
                    <span>面试</span>
                    <span class="pull-right">
                        <i class="fa " ng-class="{'fa-chevron-left': enlarged, 'fa-chevron-down' : !enlarged}"></i>
                    </span>
                </a>
                <ul>
                    <li><a href="">今日(10)</a></li>
                    <li><a href="">未读(20)</a></li>
                    <li><a href="">待定(5)</a></li>
                    <li><a href="">进行中(20)</a></li>
                </ul>
            </li>

            <li>
                <a href="/resumes">
                    <i class="fa fa-users"></i>
                    <span>人才库</span>
                </a>
            </li>
            <li class="has_sub">
                <a href="#">
                    <i class="fa fa-book"></i>
                    <span>报表</span>
                    <span class="pull-right">
                        <i class="fa " ng-class="{'fa-chevron-left': enlarged, 'fa-chevron-down' : !enlarged}"></i>
                    </span>
                </a>
                <ul>
                    <li><a href="/emails">简历邮箱</a></li>
                    <li><a href="/users">用户</a></li>
                    <li><a href="/mails">原始邮件 </a></li>
                    <li><a href="">Offer拒绝原因</a></li>
                    <li><a href="">自动规则设置</a></li>
                </ul>
            </li>
            <li class="has_sub">
                <a href="#">
                    <i class="fa fa-gear"></i>
                    <span>设置</span>
                    <span class="pull-right">
                        <i class="fa " ng-class="{'fa-chevron-left': enlarged, 'fa-chevron-down' : !enlarged}"></i>
                    </span>
                </a>
                <ul>
                    <li><a href="/emails">简历邮箱</a></li>
                    <li><a href="/users">用户</a></li>
                    <li><a href="">自动规则设置</a></li>
                    <li><a href="/settings/evaluationCriterions">面议评价设置</a></li>
                    <li><a href="/settings/emailTemplates">邮件模板设置</a></li>
                </ul>
            </li>


        </ul>
    </div>

    <script type="text/javascript">
        $(".content #nav a").on('click', function (e) {
            if (!$(this).parents(".content:first").hasClass("enlarged")) {

                if ($(this).parent().hasClass("has_sub")) {
                    e.preventDefault();
                }

                if (!$(this).hasClass("subdrop")) {
                    $("ul", $(this).parents("ul:first")).slideUp(350);
                    $("a", $(this).parents("ul:first")).removeClass("subdrop");
                    $("#nav .pull-right i").removeClass("fa-chevron-down").addClass("fa-chevron-left");

                    $(this).next("ul").slideDown(350);
                    $(this).addClass("subdrop");
                    $(".pull-right i", $(this).parents(".has_sub:last")).removeClass("fa-chevron-left").addClass("fa-chevron-down");
                    $(".pull-right i", $(this).siblings("ul")).removeClass("fa-chevron-down").addClass("fa-chevron-left");
                } else if ($(this).hasClass("subdrop")) {
                    $(this).removeClass("subdrop");
                    $(this).next("ul").slideUp(350);
                    $(".pull-right i", $(this).parent()).removeClass("fa-chevron-down").addClass("fa-chevron-left");
                }
            }
        });
    </script>
</div>