<div ng-controller="mvSidebarCtrl">
    <div class="sidebar" ng-show="identity.isAuthenticated()" ng-class="{'enlarged': enlarged}">
        <form class="navbar-form" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="搜索">
                <button class="btn search-button" type="submit">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </form>
        <ul id="nav">
            <li>
                <a href="/dashboard" class="open">
                    <i class="fa fa-home"></i>
                    <span>仪表盘</span>
                </a>
            </li>
            <li class="has_sub">
                <a href="#">
                    <i class="fa fa-list-alt"></i>
                    <span>设置</span>
                    <span class="pull-right">
                        <i class="fa " ng-class="{'fa-chevron-left': enlarged, 'fa-chevron-down' : !enlarged}"></i>
                    </span>
                </a>
                <ul>
                    <li><a href="/emails">简历邮箱</a></li>
                </ul>
            </li>
            <li>
                <a href="/mails">
                    <i class="fa fa-table"></i>
                    <span>邮件</span>
                </a>
            </li>
        </ul>
    </div>

    <script type="text/javascript">
        $(".content #nav a").on('click', function (e) {
            if (!$(this).parents(".content:first").hasClass("enlarged")) {

                if ($(this).parent().hasClass("has_sub")) {
                    e.preventDefault();
                }

                if (!$(this).hasClass("subdrop")) {
                    $("ul", $(this).parents("ul:first")).slideUp(350);
                    $("a", $(this).parents("ul:first")).removeClass("subdrop");
                    $("#nav .pull-right i").removeClass("fa-chevron-down").addClass("fa-chevron-left");

                    $(this).next("ul").slideDown(350);
                    $(this).addClass("subdrop");
                    $(".pull-right i", $(this).parents(".has_sub:last")).removeClass("fa-chevron-left").addClass("fa-chevron-down");
                    $(".pull-right i", $(this).siblings("ul")).removeClass("fa-chevron-down").addClass("fa-chevron-left");
                } else if ($(this).hasClass("subdrop")) {
                    $(this).removeClass("subdrop");
                    $(this).next("ul").slideUp(350);
                    $(".pull-right i", $(this).parent()).removeClass("fa-chevron-down").addClass("fa-chevron-left");
                }
            }
        });
    </script>
</div>